<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Custom favicon -->
    <template id="tvbo_favicon" inherit_id="web.layout" name="TVBO Favicon">
        <xpath expr="//link[@rel='shortcut icon']" position="replace">
            <link rel="shortcut icon" href="/tvbo/static/src/img/favicon.png" type="image/png" />
        </xpath>
    </template>

    <!-- TVBO Main Stylesheet - Injected into all pages -->
    <template id="tvbo_main_css" inherit_id="website.layout" name="TVBO Main CSS">
        <xpath expr="//head" position="inside">
            <link rel="stylesheet" href="/tvbo/static/src/css/main.css"/>
        </xpath>
    </template>

    <!-- TVBO Custom Header - Replace default website header -->
    <template id="tvbo_header" inherit_id="website.layout" name="TVBO Custom Header">
        <xpath expr="//header" position="replace">
            <header class="o_header_standard o_header_no_transition">
                <nav class="navbar navbar-expand-lg">
                    <div class="container">
                        <a class="navbar-brand d-flex align-items-center" href="/"
                            style="font-weight: 700; font-size: 1.25rem;">
                            <img src="/tvbo/static/src/img/logo.png" alt="TVBO"
                                style="height: 32px; margin-right: 10px;"
                                onerror="this.style.display='none'" />The Virtual Brain Ontology</a>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                            data-bs-target="#tvbo-navbar">
                            <span class="navbar-toggler-icon" style="filter: invert(1);"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="tvbo-navbar">
                            <!-- Global Search Box -->
                            <form class="tvbo-global-search mx-auto" action="/tvbo/kg" method="get" id="globalSearchForm">
                                <input type="text" name="q" id="searchBox" class="tvbo-search-input"
                                    placeholder="Search models, networks, studies..."
                                    aria-label="Search"/>
                                <button type="submit" class="tvbo-search-btn" aria-label="Search">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                        <circle cx="11" cy="11" r="8"/>
                                        <path d="m21 21-4.3-4.3"/>
                                    </svg>
                                </button>
                            </form>
                            <ul class="navbar-nav ms-auto">
                                <li class="nav-item">
                                    <a class="nav-link" href="/">Home</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/tvbo/kg">Knowledge Graph</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="/tvbo/configurator">Model Builder</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="https://virtual-twin.github.io/tvbo/"
                                        target="_blank">Docs</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link btn btn-light btn-sm ms-2" href="/web/login">Sign
                                        In</a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </nav>
            </header>
        </xpath>
    </template>

    <!-- TVBO Custom Footer - Replace default website footer -->
    <template id="tvbo_footer" inherit_id="website.layout" name="TVBO Custom Footer">
        <xpath expr="//footer" position="replace">
            <footer
                style="background-color: #2C3E50; color: rgba(255,255,255,0.8); padding: 3rem 0 1.5rem;">
                <div class="container">
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <h5 style="color: white; font-weight: 600; margin-bottom: 1rem;">TVBO</h5>
                            <p style="font-size: 0.9rem; line-height: 1.7;">
                                The Virtual Brain Ontology provides standardized computational
                                models and neuroinformatic resources for brain simulation research.
                            </p>
                        </div>
                        <div class="col-md-2 mb-4">
                            <h6 style="color: white; font-weight: 600; margin-bottom: 1rem;">
                                Resources</h6>
                            <ul
                                style="list-style: none; padding: 0; font-size: 0.9rem; line-height: 2;">
                                <li>
                                    <a href="/tvbo/models"
                                        style="color: rgba(255,255,255,0.7); text-decoration: none;">
                                        Models</a>
                                </li>
                                <li>
                                    <a href="/tvbo/networks"
                                        style="color: rgba(255,255,255,0.7); text-decoration: none;">
                                        Networks</a>
                                </li>
                                <li>
                                    <a href="/tvbo/integrators"
                                        style="color: rgba(255,255,255,0.7); text-decoration: none;">
                                        Integrators</a>
                                </li>
                                <li>
                                    <a href="/tvbo/studies"
                                        style="color: rgba(255,255,255,0.7); text-decoration: none;">
                                        Studies</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-2 mb-4">
                            <h6 style="color: white; font-weight: 600; margin-bottom: 1rem;">Links</h6>
                            <ul
                                style="list-style: none; padding: 0; font-size: 0.9rem; line-height: 2;">
                                <li>
                                    <a href="https://virtual-twin.github.io/tvbo/" target="_blank"
                                        style="color: rgba(255,255,255,0.7); text-decoration: none;">
                                        Documentation</a>
                                </li>
                                <li>
                                    <a href="https://github.com/virtual-twin/tvbo" target="_blank"
                                        style="color: rgba(255,255,255,0.7); text-decoration: none;">
                                        GitHub</a>
                                </li>
                                <li>
                                    <a href="https://www.thevirtualbrain.org" target="_blank"
                                        style="color: rgba(255,255,255,0.7); text-decoration: none;">
                                        TVB</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-md-4 mb-4">
                            <h6 style="color: white; font-weight: 600; margin-bottom: 1rem;">Contact</h6>
                            <p style="font-size: 0.9rem; line-height: 1.7;"> Charit√©
                                Universit√§tsmedizin Berlin<br /> Berlin Institute of Health (BIH)<br />
                                <a
                                    href="https://github.com/virtual-twin/tvbo"
                                    style="color: rgba(255,255,255,0.7);">
                                github.com/virtual-twin/tvbo</a>
                            </p>
                        </div>
                    </div>
                    <hr style="border-color: rgba(255,255,255,0.2); margin: 1.5rem 0;" />
                    <div class="row">
                        <div class="col-12 text-center"
                            style="font-size: 0.85rem; color: rgba(255,255,255,0.6);">
                            ¬© 2025 Charit√© Universit√§tsmedizin Berlin. Licensed under EUPL-1.2.
                        </div>
                    </div>
                </div>
            </footer>
        </xpath>
    </template>

    <!-- TVBO Custom Homepage View -->
    <record id="tvbo_homepage_view" model="ir.ui.view">
        <field name="name">TVBO Homepage</field>
        <field name="type">qweb</field>
        <field name="arch" type="xml">
            <t t-name="tvbo_homepage_view">
                <t t-call="website.layout">
                    <div id="wrap" class="oe_structure oe_empty">
                        <!-- Hero Section -->
                        <section class="s_cover pt-5 pb-5"
                            style="background: linear-gradient(135deg, #3498DB 0%, #2C3E50 100%);">
                            <div class="container">
                                <div class="row align-items-center">
                                    <div class="col-lg-12 text-center">
                                        <img src="/tvbo/static/src/img/logo.png" alt="TVBO Logo"
                                            style="max-width: 200px; margin-bottom: 2rem; filter: brightness(0) invert(1);" />
                                        <h1 class="display-3 text-white font-weight-bold mb-4">
                                            The Virtual Brain Ontology
                                        </h1>
                                        <p class="lead text-white mb-5"
                                            style="font-size: 1.25rem; opacity: 0.95;">
                                            Standardized computational models and neuroinformatic
                                            resources for brain simulation research
                                        </p>
                                        <div class="mt-5">
                                            <a href="/web" class="btn btn-light btn-lg me-3"
                                                style="color: #3498DB; font-weight: 600; padding: 0.75rem 2rem;">Explore
                                                Database</a>
                                            <a href="https://virtual-twin.github.io/tvbo/"
                                                class="btn btn-outline-light btn-lg"
                                                style="font-weight: 600; padding: 0.75rem 2rem;">
                                                Documentation</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>


                        <!-- Data Model Schema Section -->
                        <section class="pt-5 pb-5">
                            <div class="container">
                                <h2 class="text-center mb-3"
                                    style="font-size: 2.5rem; color: #2C3E50;">One Model, Complete
                                    Simulations</h2>
                                <p class="text-center text-muted mb-5"
                                    style="max-width: 700px; margin: 0 auto;">
                                    The TVBO data model captures everything needed for reproducible
                                    brain simulations in a single, standardized format.
                                </p>

                                <!-- Schema Visualization -->
                                <div class="row justify-content-center">
                                    <div class="col-lg-10">
                                        <div
                                            style="background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%); border-radius: 16px; padding: 40px; position: relative;">

                                            <!-- Central Element: SimulationExperiment -->
                                            <div class="text-center mb-4">
                                                <div
                                                    style="display: inline-block; background: linear-gradient(135deg, #3498DB 0%, #2C3E50 100%); color: white; padding: 20px 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(102,126,234,0.4);">
                                                    <div
                                                        style="font-size: 1.5rem; font-weight: 700;">
                                                        SimulationExperiment</div>
                                                    <div style="font-size: 0.9rem; opacity: 0.9;">Your
                                                        complete simulation specification</div>
                                                </div>
                                            </div>

                                            <!-- Connection Lines (visual) -->
                                            <div class="text-center" style="margin: -10px 0 20px 0;">
                                                <svg width="100%" height="40"
                                                    style="max-width: 800px;">
                                                    <line x1="20%" y1="0" x2="20%" y2="40"
                                                        stroke="#3498DB" stroke-width="2" />
                                                    <line x1="40%" y1="0" x2="40%" y2="40"
                                                        stroke="#3498DB" stroke-width="2" />
                                                    <line x1="60%" y1="0" x2="60%" y2="40"
                                                        stroke="#3498DB" stroke-width="2" />
                                                    <line x1="80%" y1="0" x2="80%" y2="40"
                                                        stroke="#3498DB" stroke-width="2" />
                                                    <line x1="20%" y1="0" x2="80%" y2="0"
                                                        stroke="#3498DB" stroke-width="2" />
                                                </svg>
                                            </div>

                                            <!-- Sub-components Row -->
                                            <div class="row g-3 mb-4">
                                                <div class="col-md-3 col-6">
                                                    <div
                                                        style="background: white; border-radius: 10px; padding: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); border-left: 4px solid #3498DB; height: 100%;">
                                                        <div
                                                            style="font-size: 1.8rem; margin-bottom: 8px;">
                                                            üß¨</div>
                                                        <div
                                                            style="font-weight: 600; color: #2C3E50; font-size: 1rem;">
                                                            Dynamics</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: #6c757d; margin-top: 4px;">Neural
                                                            mass models<br />State variables<br />
                                                            Parameters</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-6">
                                                    <div
                                                        style="background: white; border-radius: 10px; padding: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); border-left: 4px solid #2C3E50; height: 100%;">
                                                        <div
                                                            style="font-size: 1.8rem; margin-bottom: 8px;">
                                                            üîó</div>
                                                        <div
                                                            style="font-weight: 600; color: #2C3E50; font-size: 1rem;">
                                                            Network</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: #6c757d; margin-top: 4px;">Nodes
                                                            &amp; Edges<br />Connectivity<br />
                                                            Coupling</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-6">
                                                    <div
                                                        style="background: white; border-radius: 10px; padding: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); border-left: 4px solid #3498DB; height: 100%;">
                                                        <div
                                                            style="font-size: 1.8rem; margin-bottom: 8px;">
                                                            ‚ö°</div>
                                                        <div
                                                            style="font-weight: 600; color: #2C3E50; font-size: 1rem;">
                                                            Integrator</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: #6c757d; margin-top: 4px;">Numerical
                                                            method<br />Step size<br />Duration</div>
                                                    </div>
                                                </div>
                                                <div class="col-md-3 col-6">
                                                    <div
                                                        style="background: white; border-radius: 10px; padding: 15px; text-align: center; box-shadow: 0 2px 10px rgba(0,0,0,0.08); border-left: 4px solid #2C3E50; height: 100%;">
                                                        <div
                                                            style="font-size: 1.8rem; margin-bottom: 8px;">
                                                            üì°</div>
                                                        <div
                                                            style="font-weight: 600; color: #2C3E50; font-size: 1rem;">
                                                            Monitors</div>
                                                        <div
                                                            style="font-size: 0.75rem; color: #6c757d; margin-top: 4px;">BOLD,
                                                            EEG, MEG<br />Sampling<br />Transforms</div>
                                                    </div>
                                                </div>
                                            </div>

                                            <!-- Benefits Row -->
                                            <div class="row mt-4">
                                                <div class="col-md-4 text-center">
                                                    <div
                                                        style="color: #3498DB; font-weight: 600; margin-bottom: 5px;">üìÑ
                                                        YAML / JSON</div>
                                                    <div style="font-size: 0.85rem; color: #6c757d;">Human-readable
                                                        configuration files</div>
                                                </div>
                                                <div class="col-md-4 text-center">
                                                    <div
                                                        style="color: #2C3E50; font-weight: 600; margin-bottom: 5px;">üîÑ
                                                        Reproducible</div>
                                                    <div style="font-size: 0.85rem; color: #6c757d;">Share
                                                        and replicate experiments</div>
                                                </div>
                                                <div class="col-md-4 text-center">
                                                    <div
                                                        style="color: #3498DB; font-weight: 600; margin-bottom: 5px;">üêç
                                                        Python Ready</div>
                                                    <div style="font-size: 0.85rem; color: #6c757d;">Direct
                                                        integration with TVB &amp; JAX</div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- About Section -->
                        <section class="pt-5 pb-5" style="background-color: #f8f9fa;">
                            <div class="container">
                                <div class="row align-items-center">
                                    <div class="col-lg-6 mb-4 mb-lg-0">
                                        <h2
                                            style="font-size: 2rem; color: #2C3E50; margin-bottom: 1.5rem;">
                                            Standardized Resources for Computational Neuroscience
                                        </h2>
                                        <p class="text-muted mb-3">
                                            TVBO provides a comprehensive ontology and database of
                                            brain simulation models, connectivity networks, and
                                            research data structured according to international
                                            standards and best practices.
                                        </p>
                                        <p class="text-muted mb-3">
                                            Our resources enable researchers to:
                                        </p>
                                        <ul class="text-muted" style="line-height: 2;">
                                            <li>‚úì Access validated neural models with standardized
                                                parameters</li>
                                            <li>‚úì Retrieve curated brain network data from multiple
                                                sources</li>
                                            <li>‚úì Replicate published simulation studies</li>
                                            <li>‚úì Contribute new models and datasets to the
                                                community</li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="card shadow-lg"
                                            style="border: none; background: linear-gradient(135deg, #3498DB15 0%, #2C3E5015 100%);">
                                            <div class="card-body p-4" style="text-align: center;">
                                                <div style="font-size: 4rem; margin-bottom: 1rem;">
                                                    üî¨</div>
                                                <h4 class="mb-3">Open Science Platform</h4>
                                                <p class="text-muted mb-0">
                                                    Supporting FAIR principles: Findable,
                                                    Accessible, Interoperable, and Reusable research
                                                    data
                                                </p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- CTA Section -->
                        <section class="pt-5 pb-5"
                            style="background: linear-gradient(135deg, #3498DB 0%, #2C3E50 100%);">
                            <div class="container">
                                <div class="row">
                                    <div class="col-lg-8 mx-auto text-center text-white">
                                        <h2 class="mb-4" style="font-size: 2rem;">Ready to Get
                                            Started?</h2>
                                        <p class="lead mb-5">
                                            Explore our database, browse models, or access the
                                            documentation to learn more about TVBO resources.
                                        </p>
                                        <div>
                                            <a href="/web" class="btn btn-light btn-lg me-3"
                                                style="color: #3498DB; font-weight: 600; padding: 0.75rem 2rem;">Go
                                                to Database</a>
                                            <a href="https://github.com/virtual-twin/tvbo"
                                                class="btn btn-outline-light btn-lg"
                                                style="font-weight: 600; padding: 0.75rem 2rem;">GitHub
                                                Repository</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </t>
            </t>
        </field>
    </record>

    <!-- TVBO Knowledge Graph Browser -->
    <record id="tvbo_kg_browser" model="ir.ui.view">
        <field name="name">TVBO Knowledge Graph Browser</field>
        <field name="type">qweb</field>
        <field name="arch" type="xml">
            <t t-name="tvbo_kg_browser">
                <t t-call="website.layout">
                    <div id="wrap">
                        <!-- Include custom styles -->
                        <link rel="stylesheet" href="/tvbo/static/src/css/kg_browser.css"/>
                        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>

                        <!-- Browser Container -->
                        <div class="tvbo-kg-container">
                            <div class="container-fluid">
                                <div class="main-content">
                                    <div class="sidebar" id="facetsSidebar">
                                        <!-- Facets will be generated here -->
                                    </div>
                                    <div class="results-area">
                                        <div class="results-header">
                                            <div class="results-count" id="resultsCount">Loading...</div>
                                            <div style="display:flex; align-items:center; gap:12px;">
                                                <span class="performance-info" id="performanceInfo"></span>
                                                <div class="view-toggle">
                                                    <button class="view-btn active" id="listViewBtn" title="List View">
                                                        <span class="material-icons">view_list</span>
                                                    </button>
                                                    <button class="view-btn" id="graphViewBtn" title="Graph View">
                                                        <span class="material-icons">hub</span>
                                                    </button>
                                                </div>
                                                <label for="sortSelect" style="color:#4a5568; font-size:0.95rem;">Sort</label>
                                                <select id="sortSelect" class="sort-select">
                                                    <option value="relevance">Relevance</option>
                                                    <option value="az">A ‚Üí Z</option>
                                                    <option value="za">Z ‚Üí A</option>
                                                </select>
                                                <button class="clear-filters" id="clearFilters">Clear All Filters</button>
                                            </div>
                                        </div>
                                        <div class="results-grid" id="resultsGrid"></div>
                                        <div class="graph-container hidden" id="graphContainer">
                                            <svg id="graphSvg"></svg>
                                            <div class="graph-controls">
                                                <button class="graph-control-btn" id="graphZoomIn" title="Zoom In">
                                                    <span class="material-icons">add</span>
                                                </button>
                                                <button class="graph-control-btn" id="graphZoomOut" title="Zoom Out">
                                                    <span class="material-icons">remove</span>
                                                </button>
                                                <button class="graph-control-btn" id="graphReset" title="Reset View">
                                                    <span class="material-icons">center_focus_strong</span>
                                                </button>
                                            </div>
                                            <div class="graph-legend" id="graphLegend"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Modal for item details -->
                        <div id="detailsModal" class="modal hidden">
                            <div class="modal-backdrop"></div>
                            <div class="modal-dialog">
                                <div class="modal-header">
                                    <div class="modal-title" id="modalTitle">Details</div>
                                    <div class="modal-actions">
                                        <button class="modal-btn" id="modalDownload" title="Download metadata YAML">Download YAML</button>
                                        <button class="modal-close" id="modalClose" aria-label="Close">√ó</button>
                                    </div>
                                </div>
                                <div class="modal-content" id="modalContent"></div>
                            </div>
                        </div>

                        <!-- MathJax for LaTeX rendering -->
                        <script>
                            window.MathJax = {
                                tex: {
                                    inlineMath: [['$', '$'], ['\\(', '\\)']],
                                    displayMath: [['$$', '$$'], ['\\[', '\\]']],
                                    processEscapes: true,
                                    processEnvironments: true
                                },
                                svg: { fontCache: 'global', scale: 1 }
                            };
                        </script>
                        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>
                        <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
                        <script src="https://d3js.org/d3.v7.min.js"></script>

                        <!-- KG Browser JavaScript -->
                        <script src="/tvbo/static/src/js/kg_graph.js"></script>
                        <script src="/tvbo/static/src/js/kg_browser.js"></script>
                    </div>
                </t>
            </t>
        </field>
    </record>

</odoo>
